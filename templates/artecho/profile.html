{% extends 'artecho/base-navbar.html' %}
{% load static %}

{% block title_block %}
    <title>Profile</title>
    <link rel="stylesheet" href="{% static 'css/figure_display.css' %}">
    <link rel="stylesheet" href="{% static 'css/figure_tiling.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile_details.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %}

{% block body_block %}
    <div id="profile-details">
        <!-- The img on the next line should render the profile picture -->
        <img id="profile-pic" src="{{ user_profile.profilePicture.url }}" alt="Profile picture">
        <div id="description">
            <!-- The following three texts are not properly formatted yet. Needs some front end work -->
            <!-- Fullname -->
            <p></p>
            <!-- username -->
            <p></p>
            <!-- bio -->
            <p class="bio">{{ user_profile.bio }}</p>
            <!-- Total Likes -->
            <p>Total Likes: {{ user_profile.totalLikes }}</p>
        </div>
        {% if user_profile.slug == current_slug %}
            <div class="edit-btn" id="Edit">
                <a href="{% url 'profile_edit' slug=user.userprofile.slug %}">Edit</a>
            </div>
        {% else %}    
        {% endif %}
    </div>

    <div class="container">
        {% if images %}
            {% for image in images %}
                <figure>
                    <a href="{% url 'artecho:tree' image.poster.userprofile.slug image.nameSlug%}">
                        <img src="{{ image.file.url }}">
                    </a>
                    <form method="POST" action="{% url 'delete_image' image.id %}">
                        {% csrf_token %}
                        <button type="submit" class="delete-button"><i class="fa-solid fa-x"></i></button>
                    </form>
                    <div class="caption-wrapper">
                        <figcaption class="username"><a href="#">{{image.poster}}</a></figcaption>
                        <div class="likes-download-wrapper">
                            <figcaption class="likes"><i class="fa-regular fa-heart"></i> {{image.likes}}</figcaption>
                            <figcaption class="download"><a href="{% url 'artecho:download_image' image.slug %}"><i class="fa-solid fa-download fa-bounce"></i></a></figcaption>
                        </div>
                    </div>
                </figure>
            {% endfor %}
        {% else %}
            <strong>No images have been posted</strong>
        {% endif %}
    </div>
{% endblock %}